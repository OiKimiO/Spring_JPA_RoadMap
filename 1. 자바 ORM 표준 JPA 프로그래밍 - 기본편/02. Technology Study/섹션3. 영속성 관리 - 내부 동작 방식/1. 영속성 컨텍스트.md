### 날짜 : 2023-04-06 14:16
### 주제 :
---
### 태그
* #영속성_컨텍스트

### 메모
* 영속성 컨텍스트
	* 엔티티를 영구 저장하는 환경
	
* 엔티티 매니져 팩토리에서 엔티티 매니져를 조회할 수 있음

* 엔티티 매니져 저장
	* 엔티티 매니져에 저장을 할 경우 곧바로 DB에 저장되지 않음
		* persist를 메서드를 실행한다고 해서 곧바로 저장되지 않음
		* 영속성 컨텍스트의 객체는 반드시 PK를 포함해야 저장됨
	* 캐시 영역에 데이터를 먼저 저장해 두고 트랜잭션이 커밋되는 순간 저장됨
	
* DB 조회시 같은 ID를 조회하면 쿼리는 하나만을 사용
	* 자바 소스에서 자체적으로 READ COMMITED를 지원
	
* 영속성 컨텍스트를 사용했을 경우 장점
	* 1차 캐시
		* 같은 데이터를 조회할 때는 DB를 거치지 않고 캐시에서 조회
	* 동시성
		* 객체를 비교하면 같은 객체로 인식
	* 지연 쓰기
		* persist된 데이터를 따로따로 저장하는 것이 아니라 한꺼번에 저장하는 것을 말함
		* 지연쓰기를 지정하기 위해 batch_size를 지정
	
* 수정을 할 경우
	* find로 조회된 객체의 속성만을 변경하면 됨
	* JPA는 Dirty Cheking을 지원
		* 조회된 객체와 스냅샷 객체를 구분하여 둠
		* 스냅샷 객체의 프로퍼티가 변경이 있을 경우 트랜잭션 커밋시 수정이 됨

### 출처(참고문헌)
-  

### 연결문서
- 